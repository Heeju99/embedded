#include "ap_main.h"

int ap_main()
{
	uint8_t data = 1;
	int led_state = 0;

	while(1)
	{

		if(Button_GetState(GPIOB,5) == ACT_RELEASED){
			led_state = 0;
		} else if (Button_GetState(GPIOB,3) == ACT_RELEASED){
				led_state = 1;
		} else if (Button_GetState(GPIOA,10) == ACT_RELEASED){
				led_state = 2;
		}

		switch(led_state)
		{
			case 0 :
				data = (data << 1) | (data >> 7);
				break;

			case 1 :
				data = (data >> 1) | (data << 7);
				break;

			case 2:
				data = 0;
				break;
			}
			LEDBar_Write(data);
			delay(100);
		/*if(Button_GetState(GPIOB,5) == ACT_RELEASED){ //
			data = (data << 1) | (data >> 7);
		}
		else if(Button_GetState(GPIOB,3) == ACT_RELEASED){
			data = (data >> 1) | (data << 7);
		}
		else if(Button_GetState(GPIOA,10) == ACT_RELEASED){
			//button1_state ^= 1;
			data = 0;
		}

		LEDBar_Write(data);
    	delay(100);
    */
	}
	return 0;
}

void ap_Init()
{
	SystemClock_Init();
	LedBar_Init();
	Button_Init(GPIOB, 5);
	Button_Init(GPIOB, 3);
	Button_Init(GPIOA, 10);
	//Button_Init(GPIO_TypeDef *GPIOx, uint32_t pinNum);
	//Button_Init();
}

