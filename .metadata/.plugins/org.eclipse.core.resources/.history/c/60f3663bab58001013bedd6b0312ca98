#include "Distance.h"

distance_t distanceData;

void Distance_Init()
{
	stopWatch_t *pStopWatchData = osMailAlloc(stopWatchDataMailBox,0);
	memcpy(pStopWatchData , &stopWatchData, sizeof(stopWatch_t));
	osMailPut(stopWatchDataMailBox, pStopWatchData);
}

void Distance_Excute()
{

		Ultra_Trigger_Input();

        uint32_t echoTime = Ultra_Echo();
        uint16_t distance = Ultra_Calculate(echoTime);

        if(distance >= 400) { //for distance_out
        	distance = 400;
        }
        ultra.ultra_data = distance;
	}
	distance_t *pDistacneData = osMailAlloc(distanceDataMailBox,0);
	memcpy(pDistacneData , &distanceData, sizeof(distance_t));
	osMailPut(distanceDataMailBox, pDistacneData);
}







stopWatch_t stopWatchData;


void StopWatch_Init()
{
	stopWatchData.hour = 0;
	stopWatchData.min  = 0;
	stopWatchData.sec  = 0;
	stopWatchData.msec = 0;

	//FND와 공유하는 QUEUE(mail)에 값 넣기
	stopWatch_t *pStopWatchData = osMailAlloc(stopWatchDataMailBox,0);
	memcpy(pStopWatchData , &stopWatchData, sizeof(stopWatch_t));
	osMailPut(stopWatchDataMailBox, pStopWatchData);
