/*
 * GPIO.c
 *
 *  Created on: Jun 18, 2025
 *      Author: kccistc
 */

#include "GPIO.h"

void GPIO_init(GPIO_TypeDef *GPIOx, uint32_t pinNum, pin_mode_t pin_mode)
{
	if(pin_mode == OUTPUT){
		GPIOx-> MODER |= (0x01U << (pinNum*2));   //2'b10 표현, GPIO_output
		GPIOx-> MODER &= (0x02U << (pinNum*2));
	} else {
		GPIOx-> MODER &= ~(0x03U << (pinNum*2));  //2'b00 표현, GPIO_input
	}
}

void GPIO_WritePin(GPIO_TypeDef *GPIOx, uint32_t pinNum, pin_state_t pin_state)
{
	if(pin_state = PIN_SET){  //set
		GPIOA->ODR |= (1U << pinNum);
	}
	else {                    //reset
		GPIOA->ODR &= ~(1U << pinNum);
	}
}

uint32_t GPIO_ReadPin(GPIO_TypeDef *GPIOx, uint32_t pinNum)
{
	return !((GPIOx -> IDR & (1U << pinNum)) == 0);
}

void GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint32_t pinNum)
{
	GPIOx -> ODR ^=  (1U << pinNum);
}
