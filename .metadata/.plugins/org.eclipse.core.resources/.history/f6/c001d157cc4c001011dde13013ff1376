#include "Button.h"

enum {PUSHED = 0, RELEASED};

int Button_Init(GPIO_TypeDef *GPIOx, uint32_t pinNum)
{
	GPIO_init(GPIOx,pinNum,INPUT);
}

button_state_t Button_GetState(GPIO_TypeDef *GPIOx, uint32_t pinNum)
{
	static uint32_t prevState = RELEASED;
	uint32_t curState;
	curState = GPIO_ReadPin(GPIOx, pinNum); //pushed = 0

	if(prevState == RELEASED && (curState == PUSHED)){ //1st button pushed
		delay(2);  //debounce
		prevState = PUSHED; //state Update
		return ACT_PUSHED;
	}
	else if (prevState == PUSHED && (curState == RELEASED)){ //1st button pushed
		delay(2); //debounce
		prevState = RELEASED; //state Update
		return ACT_RELEASED;
	}

	return NO_ACT ;
}

