#include "Ultra.h"

#define UL_TRIGGER 5

#define LCD_E	2


static uint8_t UltraData = 0;
uint32_t count = 0;
uint16_t distance = 0;

void Ultra_Init()
{

}

void Ultra_Start()
{

}

void Ultra_Trigger_Input()
{
	Ultra_High();
	HAL_Delay();
	Ultra_High();

}

void Ultra_High()
{
	UltraData |= (1<<UL_TRIGGER);
}

void Ultra_Low()
{
	UltraData &= ~(1<<UL_TRIGGER);
}

void Ultra_sendData(uint8_t data)
{
	// High 4bit
	LCD_sendNibbleData(data);

	data = data << 4;
	// Low 4bit
	LCD_sendNibbleData(data);
}


void Ultra_Echo()
{
	if(UL_Echo){
		count++;
		if(UL_Echo == 0){
			return count;
		}
	}
}

uint16_t Ultra_Calculate(uint32_t count)
{
	if(!(count == 0)){
		distance = count / 58;
		return distance;
	}
}
