#include "FND.h"
#include "GPIO.h"

void Decode_Data(uint32_t data,uint8_t sel)
{
   GPIO_WritePin(GPIOA,11,PIN_RESET);  //a
   GPIO_WritePin(GPIOB,12,PIN_RESET);   //b
   GPIO_WritePin(GPIOB,2,PIN_RESET);  //c
   GPIO_WritePin(GPIOB,1,PIN_RESET);   //d
   GPIO_WritePin(GPIOB,15,PIN_RESET);  //e
   GPIO_WritePin(GPIOB,14,PIN_RESET); //f
   GPIO_WritePin(GPIOB,13,PIN_RESET);  //g

   switch(sel)
   {
      case 0:
         GPIO_WritePin(GPIOC, 8, PIN_SET);
         GPIO_WritePin(GPIOC, 6, PIN_SET);
         GPIO_WritePin(GPIOC, 5, PIN_SET);
         GPIO_WritePin(GPIOA, 12, PIN_SET);
         break;

      case 1:
         GPIO_WritePin(GPIOC, 8, PIN_RESET);
         GPIO_WritePin(GPIOC, 6, PIN_SET);
         GPIO_WritePin(GPIOC, 5, PIN_SET);
         GPIO_WritePin(GPIOA, 12, PIN_SET);
         break;

      case 2:
         GPIO_WritePin(GPIOC, 8, PIN_SET);
         GPIO_WritePin(GPIOC, 6, PIN_RESET);
         GPIO_WritePin(GPIOC, 5, PIN_SET);
         GPIO_WritePin(GPIOA, 12, PIN_SET);
         break;

      case 3:
         GPIO_WritePin(GPIOC, 8, PIN_SET);
         GPIO_WritePin(GPIOC, 6, PIN_SET);
         GPIO_WritePin(GPIOC, 5, PIN_RESET);
         GPIO_WritePin(GPIOA, 12, PIN_SET);
         break;

      case 4:
         GPIO_WritePin(GPIOC, 8, PIN_SET);
         GPIO_WritePin(GPIOC, 6, PIN_SET);
         GPIO_WritePin(GPIOC, 5, PIN_SET);
         GPIO_WritePin(GPIOA, 12, PIN_RESET);
         break;

      case 5:
         GPIO_WritePin(GPIOC, 8, PIN_RESET);
         GPIO_WritePin(GPIOC, 6, PIN_RESET);
         GPIO_WritePin(GPIOC, 5, PIN_RESET);
         GPIO_WritePin(GPIOA, 12, PIN_RESET);
         break;
   }

   switch(data)
   {

   case 0 :
        GPIO_WritePin(GPIOA,11,PIN_SET);  //a
        GPIO_WritePin(GPIOB,12,PIN_SET);  //b
        GPIO_WritePin(GPIOB,2,PIN_SET);   //c
        GPIO_WritePin(GPIOB,1,PIN_SET);   //d
        GPIO_WritePin(GPIOB,15,PIN_SET);   //e
        GPIO_WritePin(GPIOB,14,PIN_SET); //f
        GPIO_WritePin(GPIOB,13,PIN_RESET);  //g
      //abcdfe

   case 1 :
        GPIO_WritePin(GPIOA,11,PIN_RESET);  //a
        GPIO_WritePin(GPIOB,12,PIN_SET);  //b
        GPIO_WritePin(GPIOB,2,PIN_SET);   //c
        GPIO_WritePin(GPIOB,1,PIN_RESET);   //d
        GPIO_WritePin(GPIOB,15,PIN_RESET);   //e
        GPIO_WritePin(GPIOB,14,PIN_RESET); //f
        GPIO_WritePin(GPIOB,13,PIN_RESET);  //g
      //bc

   case 2 :
        GPIO_WritePin(GPIOA,11,PIN_SET);  //a
        GPIO_WritePin(GPIOB,12,PIN_SET);  //b
        GPIO_WritePin(GPIOB,2,PIN_RESET);   //c
        GPIO_WritePin(GPIOB,1,PIN_SET);   //d
        GPIO_WritePin(GPIOB,15,PIN_SET);   //e
        GPIO_WritePin(GPIOB,14,PIN_RESET); //f
        GPIO_WritePin(GPIOB,13,PIN_SET);  //g
      //abged

   case 3 :
        GPIO_WritePin(GPIOA,11,PIN_SET);  //a
        GPIO_WritePin(GPIOB,12,PIN_SET);  //b
        GPIO_WritePin(GPIOB,2,PIN_SET);   //c
        GPIO_WritePin(GPIOB,1,PIN_SET);   //d
        GPIO_WritePin(GPIOB,15,PIN_RESET);   //e
        GPIO_WritePin(GPIOB,14,PIN_RESET); //f
        GPIO_WritePin(GPIOB,13,PIN_SET);  //g
      //abgcd

   case 4 :
        GPIO_WritePin(GPIOA,11,PIN_RESET);  //a
        GPIO_WritePin(GPIOB,12,PIN_SET);  //b
        GPIO_WritePin(GPIOB,2,PIN_SET);   //c
        GPIO_WritePin(GPIOB,1,PIN_RESET);   //d
        GPIO_WritePin(GPIOB,15,PIN_RESET);   //e
        GPIO_WritePin(GPIOB,14,PIN_SET); //f
        GPIO_WritePin(GPIOB,13,PIN_SET);  //g
      //fgbc

   case 5 :
        GPIO_WritePin(GPIOA,11,PIN_SET);  //a
        GPIO_WritePin(GPIOB,12,PIN_RESET);  //b
        GPIO_WritePin(GPIOB,2,PIN_SET);   //c
        GPIO_WritePin(GPIOB,1,PIN_SET);   //d
        GPIO_WritePin(GPIOB,15,PIN_RESET);   //e
        GPIO_WritePin(GPIOB,14,PIN_SET); //f
        GPIO_WritePin(GPIOB,13,PIN_SET);  //g
      //afgcd

   case 6 :
        GPIO_WritePin(GPIOA,11,PIN_SET);  //a
        GPIO_WritePin(GPIOB,12,PIN_RESET);  //b
        GPIO_WritePin(GPIOB,2,PIN_SET);   //c
        GPIO_WritePin(GPIOB,1,PIN_SET);   //d
        GPIO_WritePin(GPIOB,15,PIN_SET);   //e
        GPIO_WritePin(GPIOB,14,PIN_SET); //f
        GPIO_WritePin(GPIOB,13,PIN_SET);  //g
   //afgcde

   case 7 :
        GPIO_WritePin(GPIOA,11,PIN_SET);  //a
        GPIO_WritePin(GPIOB,12,PIN_SET);  //b
        GPIO_WritePin(GPIOB,2,PIN_SET);   //c
        GPIO_WritePin(GPIOB,1,PIN_RESET);   //d
        GPIO_WritePin(GPIOB,15,PIN_RESET);   //e
        GPIO_WritePin(GPIOB,14,PIN_RESET); //f
        GPIO_WritePin(GPIOB,13,PIN_RESET);  //g
         //abc

   case 8 :
         GPIO_WritePin(GPIOA,11,PIN_SET);  //a
         GPIO_WritePin(GPIOB,12,PIN_SET);   //b
         GPIO_WritePin(GPIOB,2,PIN_SET);  //c
         GPIO_WritePin(GPIOB,1,PIN_SET);   //d
         GPIO_WritePin(GPIOB,15,PIN_SET);  //e
         GPIO_WritePin(GPIOB,14,PIN_SET); //f
         GPIO_WritePin(GPIOB,13,PIN_SET);  //g
      //abcdefg

   case 9 :
        GPIO_WritePin(GPIOA,11,PIN_SET);  //a
        GPIO_WritePin(GPIOB,12,PIN_SET);  //b
        GPIO_WritePin(GPIOB,2,PIN_SET);   //c
        GPIO_WritePin(GPIOB,1,PIN_RESET);   //d
        GPIO_WritePin(GPIOB,15,PIN_RESET);   //e
        GPIO_WritePin(GPIOB,14,PIN_SET); //f
        GPIO_WritePin(GPIOB,13,PIN_SET);  //g
      //abcfg
   }
}


void FND_Init()
{
   GPIO_Init(GPIOC, 8, OUTPUT); //D1
   GPIO_Init(GPIOC, 6, OUTPUT); //D2
   GPIO_Init(GPIOC, 5, OUTPUT); //D3
   GPIO_Init(GPIOA, 12,OUTPUT); //D4
}
