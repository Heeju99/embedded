#include "UltraRun.h"

ultra_t ultra;

uint8_t Ultra_done;

void Ultra_RunCallBack()
{
	static uint32_t counter = 0;
	static uint32_t counter1 = 0;
	counter++;
	Ultra_done = 0;
	if (counter > 30000) //3sec
	{
		Ultra_Trigger_Input();
		if(counter1 == 20000){
			Ultra_done = 1;
			counter1++;
		}
		counter1 = 0;
		counter = 0;
        uint32_t echoTime = Ultra_Echo();
        uint16_t distance = Ultra_Calculate(echoTime);

        ultra.ultra_data = distance;
	}
	Presenter_UL_OutData(ultra);
}
